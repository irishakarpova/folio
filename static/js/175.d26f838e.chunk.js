(this.webpackJsonpportfolio=this.webpackJsonpportfolio||[]).push([[175],{126:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(10),r=n(98),i=Object(r.a)((function(e){var t,n;return{root:{"& > *":Object(a.a)({marginTop:e.spacing(2)},e.breakpoints.down("sm"),{marginTop:e.spacing(5)})},PaperForm:{position:"relative",display:"flex",justifyContent:"center"},rootPapper:{padding:15,background:"none","& > *":Object(a.a)({margin:e.spacing(.5)},e.breakpoints.down("sm"),{margin:e.spacing(.5),padding:0}),display:"flex",justifyContent:"center"},PaperChips:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},rootSl:{zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.spacing(6),padding:0},oderedList:{padding:e.spacing(1,0,1,0)},rootCode:{zIndex:100,display:"flex",alignItems:"center",margin:e.spacing(4,0,4,0),padding:0},bgPaper:{background:"#fefefe"},bgPaperWithP:{background:"#fefefe",paddingTop:40},rootSlider:Object(a.a)({display:"flex",justifyContent:"center",marginTop:e.spacing(2),minHeight:600},e.breakpoints.down("sm"),{marginTop:e.spacing(0)}),arrow:Object(a.a)({margin:e.spacing(4,0,0,14)},e.breakpoints.down("sm"),{margin:e.spacing(4,0,0,2)}),formControl:(t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:30},Object(a.a)(t,e.breakpoints.down("xs"),{padding:15,alignItems:"center"}),Object(a.a)(t,"width","100%"),Object(a.a)(t,"marginLeft","auto"),Object(a.a)(t,"marginRight","auto"),Object(a.a)(t,"marginTop",50),Object(a.a)(t,"borderRadius",5),Object(a.a)(t,"border","1px solid #d4d4d4"),t),formControlDark:(n={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:30},Object(a.a)(n,e.breakpoints.down("xs"),{padding:15,alignItems:"center"}),Object(a.a)(n,"width","100%"),Object(a.a)(n,"marginLeft","auto"),Object(a.a)(n,"marginRight","auto"),Object(a.a)(n,"marginTop",50),Object(a.a)(n,"borderRadius",5),Object(a.a)(n,"border","1px solid #605a57"),n),formRoot:{display:"flex",flexDirection:"row",alignItems:"center","& .MuiTextField-root":Object(a.a)({margin:e.spacing(1),width:"25ch"},e.breakpoints.down("xs"),{width:"10ch"})},formGr:{marginLeft:e.spacing(1)},typoLink:{marginLeft:e.spacing(1),padding:e.spacing(0,1,0,1),borderRadius:3,border:"1px solid",borderColor:e.palette.primary.main},buttonLink:{position:"absolute",color:e.palette.secondary,left:5,top:25},title:{paddingTop:50},description:{paddingTop:40},pBottom:{paddingBottom:40},videoBg:{position:"fixed",zIndex:10},videoBgdesc:{position:"fixed",zIndex:11,right:0,padding:20,color:"#fafafa"},test:Object(a.a)({width:200},e.breakpoints.down("xs"),{width:"33%"}),iframeStyle:Object(a.a)({marginTop:"30px",height:250,width:"100%",border:"none",borderRadius:2},e.breakpoints.down("xs"),{padding:0}),codeText:{color:"#f50057",padding:"3px",fontSize:"1.1rem"}}}))},204:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l}));var a='import { Record } from "immutable";\n\nconst ArticleRecord = Record({\n    id: null,\n    title: null,\n    description: null,\n    location: null,\n    members: null\n});\n\nconst DataRecord = Record({\n  entities: arrToMap([], ArticleRecord),\n  loading: false,\n  error: false\n});\n\nexport default (articlesState = new DataRecord(), action) => {\n  switch (type) {\n    ...\n      default:\n          return articlesState;\n  }\n};\n',r='switch (type) {\n  case LOAD_ALL_ARTICLES:\n      return articlesState\n          .set("entities", arrToMap(response, ArticleRecord))\n          .set("loading", false);\n\n  case ADD_ARTICLE:\n      return articlesState.setIn(["entities", randomId], {\n          ...payload.article,\n          id: randomId\n      });\n  default:\n      return articlesState;\n}\n',i="schema {\n  query: Query\n}\n\ntype Query {\n  getMenu: [MenuItem]\n}\n\ntype MenuItem {\n    id: ID!\n    label: String!\n    parentId: ID!\n}\n",o="\n  enum CategoryTour {\n    food\n    sport\n    masterclass\n  }\n  type CategoryFilter {\n    offset: Int!\n    limit: Int!\n  }\n\n  type Product {\n    id: Int!\n    title: String!\n    price: Int!\n    desc_tour: String!\n    location: String!\n    category: CategoryTour\n  }\n\n  type Query {\n    products(category: CategoryTour, limit: Int, offset: Int): [Product!]!\n    product(id: Int!): Product\n  }\n\n",s="query Products($category: CategoryTour, $limit: Int, $offset: Int) {\n  products(category: $category, limit: $limit, offset: $offset) {\n    id\n    title\n    price\n    category\n  }\n}\n",c=' const result = useProductsQuery({\n  variables: { category },\n  fetchPolicy: "cache-first" ,\n  errorPolicy: "all"\n});',l='export const getServerSideProps: GetServerSideProps = async (context) => {\n  const category =\n    typeof context.params?.category === "string"\n      ? context.params.category\n      : undefined;\n\n  if (category === undefined || isCategory(category)) {\n    const apolloClient = initializeApollo();\n\n    await apolloClient.query<ProductsQuery, ProductsQueryVariables>({\n      query: ProductsDocument,\n      variables: { category }\n    });\n\n    return {\n      props: {\n        initialApolloState: apolloClient.cache.extract()\n      }\n    };\n  }\n\n  return { props: {} };\n};'},736:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),o=n(583),s=n(286),c=n(204),l=n(114),d=n(121),p=n(248),h=n(380),g=n(1),m=n(3),u=(n(6),n(4)),j=n(8),b=n(14),f=a.forwardRef((function(e,t){var n=e.absolute,r=void 0!==n&&n,i=e.classes,o=e.className,s=e.component,c=void 0===s?"hr":s,l=e.flexItem,d=void 0!==l&&l,p=e.light,h=void 0!==p&&p,j=e.orientation,b=void 0===j?"horizontal":j,f=e.role,x=void 0===f?"hr"!==c?"separator":void 0:f,y=e.variant,O=void 0===y?"fullWidth":y,v=Object(m.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return a.createElement(c,Object(g.a)({className:Object(u.a)(i.root,o,"fullWidth"!==O&&i[O],r&&i.absolute,d&&i.flexItem,h&&i.light,"vertical"===b&&i.vertical),role:x,ref:t},v))})),x=Object(j.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(b.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(f),y=n(149),O=n.n(y),v=n(150),S=n.n(v),w=n.p+"static/media/ssr_1.582bb821.svg",N=n.p+"static/media/ssr_2.f5118900.svg",I=n(126),C=n(33),L=n(62),T=n(2);t.default=function(e){var t=Object(I.a)(),n=r.a.useContext(C.a);return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(T.jsxs)("div",{className:t.root,children:[Object(T.jsxs)(d.a,{className:t.title,children:[Object(T.jsx)(d.a,{className:t.buttonLink,to:"/",component:i.b,children:Object(T.jsx)(O.a,{color:"secondary"})}),Object(T.jsxs)(l.a,{variant:"h3",align:"center",children:["Apollo GraphQL Data. SSR",Object(T.jsx)("br",{})," Next.js with TypeScript"]})]}),Object(T.jsxs)(h.a,{container:!0,className:t.rootPapper,children:[Object(T.jsxs)(h.a,{item:!0,sm:12,md:12,lg:6,className:t.PaperChips,children:[Object(T.jsx)(p.a,{label:"Next.js",color:"primary"}),Object(T.jsx)(p.a,{label:"TypeScript",color:"primary"}),Object(T.jsx)(p.a,{label:"Apollo GraphQL",color:"primary"}),Object(T.jsx)(p.a,{label:"bootstrap",color:"primary"}),Object(T.jsx)(p.a,{label:"GraphQL Code Generator",color:"primary"})]}),Object(T.jsxs)(h.a,{item:!0,xs:12,sm:8,md:6,lg:6,children:[Object(T.jsxs)(d.a,{mt:3,mb:3,display:"flex",alignItems:"center",children:[Object(T.jsx)(S.a,{color:"secondary"}),Object(T.jsx)(l.a,{className:t.typoLink,children:Object(T.jsx)(o.a,{href:"https://github.com/irishakarpova/next.js",variant:"body2",children:"GitHub"})})]}),Object(T.jsx)(x,{light:!0}),Object(T.jsx)(l.a,{className:t.description,variant:"subtitle2",align:"left",children:"Next.js is a well-known JavaScript framework for Server-Side Rendering (SSR) and Static Generation (SSG) in React applications. The common cases to use SSR are to get metadata for search engines and to handle initial render for fast render times. The process goes as follows when the server receives the request, it renders the required components into an HTML string and then sends it, as a response, to the client that handles full rendering."}),Object(T.jsx)(l.a,{className:t.description,align:"left",children:"I use SSR rendering in the example below. The main page generates to display a product list with dynamic routes by category."}),Object(T.jsx)("img",{src:w,className:t.rootSl,width:"60%"}),Object(T.jsx)(l.a,{className:t.description,align:"left",children:"Because React\u2019s rendering is synchronous, we need to fetch data in an asynchronous phase\xa0then in a synchronous phase to rendering it. Next.js has two\xa0data fetching strategies: Static Generation\xa0and\xa0Server-side Rendering. According to documentation getStaticProps\xa0function uses to pre-render page at build time, before to render. If a page has dynamic routes we export\xa0function\xa0getStaticPaths. In addition, this function can be specifying to refresh the data at regular intervals. To pre-render the page on each request\xa0 we use getServerSideProps function."}),Object(T.jsx)(l.a,{className:t.description,variant:"subtitle2",align:"left",children:"The process of using the Apollo client in a Next.js:"}),Object(T.jsx)("img",{src:N,className:t.rootSl,width:"60%"}),Object(T.jsx)(l.a,{className:t.description,variant:"body2",align:"left",children:Object(T.jsxs)("ol",{children:[Object(T.jsx)("li",{children:"Instantiate ApolloClient to get the data cached and set to initialApolloState."}),Object(T.jsx)("li",{children:"Derive the cache of the latest version of the ApolloClient instance and pass the instance with a cache to a component."}),Object(T.jsx)("li",{children:"Fetch the data by running a useQuery from '@apollo/client' in the page component."})]})}),Object(T.jsxs)(l.a,{className:t.description,variant:"body2",align:"left",children:["Steps in details:",Object(T.jsxs)("ol",{children:[Object(T.jsxs)("li",{className:t.oderedList,children:["Setup Next.js project. I used command",Object(T.jsx)("code",{children:" npx create-next-app "})]}),Object(T.jsxs)("li",{className:t.oderedList,children:["Install TypeScript."," ",Object(T.jsxs)("p",{children:["First, I create ",Object(T.jsx)("code",{children:"tsconfig.json"})," file to specify the compiler options required to compile the project in the root folder."]})," ","I Define Node.js version in use and specify when install."," ",Object(T.jsx)("code",{children:"npm install \u2014save-dev typescript @types/react @types/node@version-of-node.js"})]}),Object(T.jsxs)("li",{className:t.oderedList,children:["Setup Apollo client based on\xa0this"," ",Object(T.jsx)(o.a,{href:"https://github.com/vercel/next.js/tree/canary/examples/api-routes-apollo-server-and-client/apollo",variant:"body2",children:"official Vercel starter example"})]}),Object(T.jsxs)("li",{className:t.oderedList,children:["Install ",Object(T.jsx)("code",{children:" apollo-server-micro"})," to create GraphQL endpoint."]}),Object(T.jsxs)("li",{className:t.oderedList,children:["Create GraphQl schema",Object(T.jsx)("div",{className:t.rootCode,children:Object(T.jsx)(s.a,{className:t.rootCode,text:c.d,language:"java",showLineNumbers:!1,theme:"light"===n.currentTheme.palette.type?s.c:s.b,wrapLines:!0})})]}),Object(T.jsxs)("li",{className:t.oderedList,children:["Create GraphQl schema to query the product listing.",Object(T.jsx)("div",{className:t.rootCode,children:Object(T.jsx)(s.a,{className:t.rootCode,text:c.e,language:"java",showLineNumbers:!1,theme:"light"===n.currentTheme.palette.type?s.c:s.b,wrapLines:!0})})]}),Object(T.jsx)("li",{className:t.oderedList,children:"Create Resolver function"}),Object(T.jsxs)("li",{className:t.oderedList,children:["Setup ApolloClient based on"," ",Object(T.jsx)(o.a,{href:"https://github.com/vercel/next.js/tree/canary/examples/api-routes-graphql/pages/api",variant:"body2",children:"official Vercel starter example"})]}),Object(T.jsxs)("li",{className:t.oderedList,children:["In the component page export function"," ",Object(T.jsx)("code",{children:"getServerSideProps"})," to get the data for pre-render. Next.js wraps each component in the component App. Here, I instantiate apolloClient in the App component:",Object(T.jsxs)("code",{children:[" ","const apolloClient = useApollo(pageProps.initializeApolloState);"]})," ","It takes the cache from ",Object(T.jsx)("code",{children:"getServerSideProps"})," method and pass cache as props to \xa0component tree to find queries."]}),Object(T.jsxs)("li",{className:t.oderedList,children:["To render the markup, run queries in the component on the client. To prefetch data, run queries on the server.",Object(T.jsx)("div",{className:t.rootCode,children:Object(T.jsx)(s.a,{className:t.rootCode,text:c.f,language:"java",showLineNumbers:!1,theme:"light"===n.currentTheme.palette.type?s.c:s.b,wrapLines:!0})}),Object(T.jsx)("div",{className:t.rootCode,children:Object(T.jsx)(s.a,{className:t.rootCode,text:c.g,language:"java",showLineNumbers:!1,theme:"light"===n.currentTheme.palette.type?s.c:s.b,wrapLines:!0})})]})]})]}),Object(T.jsx)(l.a,{className:t.description,variant:"subtitle2",align:"left",children:"In addition to pre-rendering functionality, Next.js provides beneficial tools such as file-system routing based on Pages, image optimization, supports CSS Modules, and more."}),Object(T.jsx)(L.a,{})]})]})]})}}}]);
//# sourceMappingURL=175.d26f838e.chunk.js.map